<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tomcat.status.dao.connectorMapper">
  <resultMap id="BaseResultMap" type="com.tomcat.status.model.connector">
    <id column="ipAddress" jdbcType="VARCHAR" property="ipaddress" />
    <id column="port" jdbcType="INTEGER" property="port" />
    <id column="time" jdbcType="TIMESTAMP" property="time" />
    <id column="name" jdbcType="VARCHAR" property="name" />
    <result column="maxThreads" jdbcType="INTEGER" property="maxthreads" />
    <result column="currentThreadCount" jdbcType="INTEGER" property="currentthreadcount" />
    <result column="currentThreadsBusy" jdbcType="INTEGER" property="currentthreadsbusy" />
    <result column="maxTime" jdbcType="BIGINT" property="maxtime" />
    <result column="processingTime" jdbcType="BIGINT" property="processingtime" />
    <result column="requestCount" jdbcType="INTEGER" property="requestcount" />
    <result column="errorCount" jdbcType="INTEGER" property="errorcount" />
    <result column="bytesReceived" jdbcType="BIGINT" property="bytesreceived" />
    <result column="bytesSent" jdbcType="BIGINT" property="bytessent" />
  </resultMap>
  <sql id="Base_Column_List">
    ipAddress, port, time, name, maxThreads, currentThreadCount, currentThreadsBusy, 
    maxTime, processingTime, requestCount, errorCount, bytesReceived, bytesSent
  </sql>
  <select id="selectByPrimaryKey" parameterType="com.tomcat.status.model.connectorKey" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from connector
    where ipAddress = #{ipaddress,jdbcType=VARCHAR}
      and port = #{port,jdbcType=INTEGER}
      and time = #{time,jdbcType=TIMESTAMP}
      and name = #{name,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.tomcat.status.model.connectorKey">
    delete from connector
    where ipAddress = #{ipaddress,jdbcType=VARCHAR}
      and port = #{port,jdbcType=INTEGER}
      and time = #{time,jdbcType=TIMESTAMP}
      and name = #{name,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.tomcat.status.model.connector">
    insert into connector (ipAddress, port, time, 
      name, maxThreads, currentThreadCount, 
      currentThreadsBusy, maxTime, processingTime, 
      requestCount, errorCount, bytesReceived, 
      bytesSent)
    values (#{ipaddress,jdbcType=VARCHAR}, #{port,jdbcType=INTEGER}, #{time,jdbcType=TIMESTAMP}, 
      #{name,jdbcType=VARCHAR}, #{maxthreads,jdbcType=INTEGER}, #{currentthreadcount,jdbcType=INTEGER}, 
      #{currentthreadsbusy,jdbcType=INTEGER}, #{maxtime,jdbcType=BIGINT}, #{processingtime,jdbcType=BIGINT}, 
      #{requestcount,jdbcType=INTEGER}, #{errorcount,jdbcType=INTEGER}, #{bytesreceived,jdbcType=BIGINT}, 
      #{bytessent,jdbcType=BIGINT})
  </insert>
  <insert id="insertSelective" parameterType="com.tomcat.status.model.connector">
    insert into connector
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="ipaddress != null">
        ipAddress,
      </if>
      <if test="port != null">
        port,
      </if>
      <if test="time != null">
        time,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="maxthreads != null">
        maxThreads,
      </if>
      <if test="currentthreadcount != null">
        currentThreadCount,
      </if>
      <if test="currentthreadsbusy != null">
        currentThreadsBusy,
      </if>
      <if test="maxtime != null">
        maxTime,
      </if>
      <if test="processingtime != null">
        processingTime,
      </if>
      <if test="requestcount != null">
        requestCount,
      </if>
      <if test="errorcount != null">
        errorCount,
      </if>
      <if test="bytesreceived != null">
        bytesReceived,
      </if>
      <if test="bytessent != null">
        bytesSent,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="ipaddress != null">
        #{ipaddress,jdbcType=VARCHAR},
      </if>
      <if test="port != null">
        #{port,jdbcType=INTEGER},
      </if>
      <if test="time != null">
        #{time,jdbcType=TIMESTAMP},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="maxthreads != null">
        #{maxthreads,jdbcType=INTEGER},
      </if>
      <if test="currentthreadcount != null">
        #{currentthreadcount,jdbcType=INTEGER},
      </if>
      <if test="currentthreadsbusy != null">
        #{currentthreadsbusy,jdbcType=INTEGER},
      </if>
      <if test="maxtime != null">
        #{maxtime,jdbcType=BIGINT},
      </if>
      <if test="processingtime != null">
        #{processingtime,jdbcType=BIGINT},
      </if>
      <if test="requestcount != null">
        #{requestcount,jdbcType=INTEGER},
      </if>
      <if test="errorcount != null">
        #{errorcount,jdbcType=INTEGER},
      </if>
      <if test="bytesreceived != null">
        #{bytesreceived,jdbcType=BIGINT},
      </if>
      <if test="bytessent != null">
        #{bytessent,jdbcType=BIGINT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.tomcat.status.model.connector">
    update connector
    <set>
      <if test="maxthreads != null">
        maxThreads = #{maxthreads,jdbcType=INTEGER},
      </if>
      <if test="currentthreadcount != null">
        currentThreadCount = #{currentthreadcount,jdbcType=INTEGER},
      </if>
      <if test="currentthreadsbusy != null">
        currentThreadsBusy = #{currentthreadsbusy,jdbcType=INTEGER},
      </if>
      <if test="maxtime != null">
        maxTime = #{maxtime,jdbcType=BIGINT},
      </if>
      <if test="processingtime != null">
        processingTime = #{processingtime,jdbcType=BIGINT},
      </if>
      <if test="requestcount != null">
        requestCount = #{requestcount,jdbcType=INTEGER},
      </if>
      <if test="errorcount != null">
        errorCount = #{errorcount,jdbcType=INTEGER},
      </if>
      <if test="bytesreceived != null">
        bytesReceived = #{bytesreceived,jdbcType=BIGINT},
      </if>
      <if test="bytessent != null">
        bytesSent = #{bytessent,jdbcType=BIGINT},
      </if>
    </set>
    where ipAddress = #{ipaddress,jdbcType=VARCHAR}
      and port = #{port,jdbcType=INTEGER}
      and time = #{time,jdbcType=TIMESTAMP}
      and name = #{name,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.tomcat.status.model.connector">
    update connector
    set maxThreads = #{maxthreads,jdbcType=INTEGER},
      currentThreadCount = #{currentthreadcount,jdbcType=INTEGER},
      currentThreadsBusy = #{currentthreadsbusy,jdbcType=INTEGER},
      maxTime = #{maxtime,jdbcType=BIGINT},
      processingTime = #{processingtime,jdbcType=BIGINT},
      requestCount = #{requestcount,jdbcType=INTEGER},
      errorCount = #{errorcount,jdbcType=INTEGER},
      bytesReceived = #{bytesreceived,jdbcType=BIGINT},
      bytesSent = #{bytessent,jdbcType=BIGINT}
    where ipAddress = #{ipaddress,jdbcType=VARCHAR}
      and port = #{port,jdbcType=INTEGER}
      and time = #{time,jdbcType=TIMESTAMP}
      and name = #{name,jdbcType=VARCHAR}
  </update>
  <select id="selectTopTwo"  resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from connector  
    where
    ipAddress = #{ipaddress}    
    and port=#{port} 
    order by time DESC,name DESC limit 2
  </select>
</mapper>